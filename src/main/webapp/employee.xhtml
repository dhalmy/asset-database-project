<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:f="jakarta.faces.core"
      xmlns:p="jakarta.faces.passthrough">
    <h:head>
        <title>Create New Employee Form</title>
        
    </h:head>
    <h:body>
        <ui:debug hotkey="z"/>
        Create a new Employee


        <h:form>

            <p>       
                <h:panelGroup layout="block">
                    <h:outputLabel for="employeeFirstName" value="Employee First Name"></h:outputLabel>
                    <h:inputText id="employeeFirstName" value="#{employeeController.employee.firstName}">
                        <f:ajax event="blur" listener="#{employeeController.generateUsername}" render="employeeUsername"/>
                    </h:inputText>
                    <h:message for="employeeFirstName"/>
    <!--                <h:inputText id="employeeFirstName" value="#{employeeController.employee.firstName}"></h:inputText>-->
                </h:panelGroup>
            </p>
               
            <p>
                <h:panelGroup layout="block">
                    <h:outputLabel for="employeeLastName" value="Employee Last Name"></h:outputLabel>
                    <h:inputText id="employeeLastName" value="#{employeeController.employee.lastName}">
                        <f:ajax event="blur" listener="#{employeeController.generateUsername}" render="employeeUsername"/>
                        <f:ajax event="blur" listener="#{employeeController.generateUsername}" render="employeeEmail" />
                    </h:inputText>
                    <h:message for="employeeLastName"/>
    <!--                <h:inputText id="employeeLastName" value="#{employeeController.employee.lastName}"></h:inputText>-->
                </h:panelGroup>
            </p>
            
            <p>
                <h:panelGroup layout="block">
                    <h:outputLabel for="employeeUsername" value="Employee Username"></h:outputLabel>
                        <h:inputText id="employeeUsername" value="#{employeeController.employee.username}">
                    </h:inputText>
                    <h:message for="employeeUsername"/>
                    
                </h:panelGroup>
            </p>
            
            <p>
                <h:panelGroup layout="block">
                    <h:outputLabel for="employeeEmail" value="Employee Email"></h:outputLabel>
                    <h:inputText id="employeeEmail" value="#{employeeController.generatedEmail}" readonly="true" style="background-color: #e0e0e0; border-color: #e0e0e0;">
<!--                        <f:ajax event="blur" listener="#{employeeController.generateUsername}" render="employeeEmail" />-->
                    </h:inputText>
                </h:panelGroup>
            </p>
            
            
            <p>
                <h:panelGroup layout="block">
                    <h:outputLabel for="hireDate" value="Hire Date"></h:outputLabel>
                    <h:inputText p:type="date" id="hireDate" value="#{employeeController.employee.hireDate}">
                        <f:convertDateTime type="localDate" pattern="yyyy-MM-dd"></f:convertDateTime>
                    </h:inputText>
                    <h:message for="employeeHireDate"/>
                </h:panelGroup>
            </p>
            
            <p>
                <h:panelGroup layout="block">
                    <h:outputLabel for="employeeType" value="Employee Type"></h:outputLabel>
                    <h:selectOneMenu id="employeeType" value="#{employeeController.employee.type}">
                        <f:selectItem itemValue="empty" itemLabel="empty"/>
                        <f:selectItem itemValue="RPI" itemLabel="RPI"/>
                        <f:selectItem itemValue="RAP" itemLabel="Research and Planning"/>
                        <f:selectItem itemValue="FINANCE" itemLabel="Finance"/>
                        <f:selectItem itemValue="COMMS" itemLabel="Communications"/>
                        <f:selectItem itemValue="EXECUTIVE" itemLabel="Executive"/>
                        <f:selectItem itemValue="IT" itemLabel="IT"/>
                        <f:selectItem itemValue="PLANNING" itemLabel="Planning"/>
                        <f:selectItem itemValue="GOVAFFAIRS" itemLabel="Government Affairs"/>
                        <f:selectItem itemValue="HR" itemLabel="Human Resources"/>
                        <f:selectItem itemValue="ExEmployee" itemLabel="Former Employee"/>
                    </h:selectOneMenu>
                </h:panelGroup>
            </p>
            
            <p>
                <h:commandButton action="#{employeeController.saveEmployee()}" value="Create Employee"/>
            </p>


        </h:form>
    </h:body>
</html>

<!--/*
public Employee(String firstName, String lastName, String username, LocalDate hireDate, EmployeeDepartment type) {
        this.firstName = firstName;
        this.lastName = lastName;
        this.username = username;
        this.hireDate = hireDate;
        this.type = type;
        this.email = username + "@cats.illinois.gov";
    }
    */-->
